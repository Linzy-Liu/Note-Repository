\documentclass{ctexbook}
\usepackage{amsmath, amsthm, amssymb, mathrsfs,anyfontsize, bbm}
\usepackage[colorlinks, bookmarksopen=true, bookmarksnumbered=true]{hyperref}

\begin{document}

\theoremstyle{definition} 
\newtheorem{define}{Def}[section]

\theoremstyle{plain} 
\newtheorem{thm}{Theorem}[section] \newtheorem{lema}{Lemma}[chapter] \newtheorem{cor}{Corollary}[chapter]
\newtheorem{prop}{Property}[chapter] \newtheorem{fact}{Fact}[chapter] 

%\frontmatter
%\tableofcontents

\mainmatter
\chapter{Measure Theory}

\section{Set Theory}

Before presenting our ideas, we should give some notations here as a standard.
\begin{define}[point]
    A \textbf{point} $x \in \mathbb{R}^n$ consists of n-tuple of real numbers,
    \[x=(x_1,x_2,\ldots,x_n),\quad x_i \in \mathbb{R}^n \text{ for } i=1,2,\ldots,n\]
\end{define}
\begin{define}[norm]
    The \textbf{norm} of $x$ is denoted by $\left|x\right|$ and is defined to be the standard Euclidean norm given by 
    \[\left|x\right|:=(\sum\limits^n_{i=1}x_i^2)^{1/2}\]
\end{define}
\begin{define}[complement]
    The \textbf{complement} of a set $E$ in $\mathbb{R}^n$ is denoted by $E^c$ and defined by 
    \[E^c:=\{x\in \mathbb{R}^n:\, x \notin E\}\]
    And the \textbf{complement} of $F$ in $E$ is denoted by 
    \[E-F:=\{x \in E:\, x \notin F\}\]
    assuming $E$ and $F$ are the subsets of $\mathbb{R}^n$
\end{define}
\begin{define}[distance between sets]
    Let $E$ and $F$ be the subsets of $\mathbb{R}^n$, we define the distance between $E$ and $F$ by 
    \[d(E,F):=\inf\limits_{x\in E, y\in F}\left|x-y\right|\] 
\end{define}
\begin{define}
    An open ball centered at $x$ and of radius $r$ is denoted by 
    \[B_r(x):=\{y\in \mathbf{R}^n:\, \left|x-y\right|<r\}\]
\end{define}
\begin{define}[open set and close set]
    A set $E \subset \mathbf{R}^n$ is \textbf{open} if for every $x$ in $E$, there exists $r>0$ with $B_r(x) \subset E$
    On the contrary, a set $E \subset \mathbf{R}^n$ is \textbf{closed} if it's complement is open
\end{define}
\begin{define}[compact set]
    A set is \textbf{bounded} if the set can be contained in some open balls with finite radius.
    And a bounded set is \textbf{compact} if the set is also closed, which holds the \textit{Heine-Borel~covering~property} 
\end{define}
\begin{define}[perfect set]
    A point $x\in \mathbb{R}^n$ is a \textbf{limit~point} of set $E$ if for every $r>0$, the ball $B_r(x)$ contains the point of
    E.
    If there is a point $x \in E$ such that there exists $r>0$ where $B_r(x)\cap E$ equals to $\{x\}$, we call it an \textbf{isolated~point}.
    A close set is \textbf{perfect} if there're no isolateted points in it.  
\end{define}
\begin{define}[rectangles]
    A \textbf{close rectangle} $R$ in $\mathbb{R}^n$ is given by taking the product of one-dimensional closed and bounded intervals.
    \[R:=[a_1,b_1]\times\ldots\times[a_n,b_n]\]
    where $a_i\leq b_i$ are real numbers, for $i=1,2,\ldots,n$\\
    The \textbf{volume} of rectangles R is denoted by $\left|R\right|$, which is defined to be 
    \[\left|R\right|:=\prod\limits_{i=1}^n(b_i-a_i)\]
\end{define}

The main idea in building the measure theory consists of measuring a subset of $\mathbb{R}^n$ properly. However, the property of
a subset of $\mathbb{R}^n$ can be extremely ambuguous. Hence, the core of approximating the "volume" of most of subsets in $\mathbb{R}^n$
lay in the rectangles, which can be manipulated easily and has a standard notion of volume that is given by taking the product of
length of all sides. Such claim is guaranteed by the theorems below.

\begin{lema}
    If a rectangle $R$ is the almost disjoint union of finitely many rectangles, say $R = \bigcup \limits_{i=1}^N R_i$, then
    \[\left|R\right|=\sum\limits_{i=1}^N \left|R_i\right|\]
\end{lema}
\begin{lema}
    If $R,R_1,R_2,\ldots,R_N$ are rectangles, and $R \subset \bigcup \limits_{i=1}^N R_i$, then
    \[\left|R\right|\leq\sum\limits_{i=1}^N \left|R_i\right|\]
\end{lema}

\begin{thm}
    Every open subset $\mathcal{O}$ of $\mathbb{R}$ can be uniquely written as a countable union of disjoint open intervals.
\end{thm}
\begin{thm}
    Every open subset $\mathcal{O}$ of $\mathbb{R}^n (n\geq 1)$ can be written as a countable union of almost disjoint closed
    rectangles. (A countable union is said to be \textbf{almost~disjoint} only if the interiors of the sets are disjoint.)
\end{thm}
\begin{fact}[Cantor Set]
    Let $\mathcal{C} $ denote the Cantor Set, then:
    \begin{enumerate}
        \item $\mathcal{C} $ is a compact set.
        \item $\mathcal{C} $ is perfect.
        \item $\mathcal{C} $ has the cardinality of continuum, which implies $\,\overline{\overline{\mathcal{C}}} = \aleph$
    \end{enumerate}
\end{fact}

\section{The exterior measure}

After simple introductions to our claim which says most of subset can be approximated by countable rectangles, we raise the
notion of an intuitive measure 

\begin{define}[exterior measure]
    If $E$ is any subset of $\mathbb{R}^n$, the \textbf{exterior~measure} of $E$ is given by
    \[m^*(E)=\inf\sum\limits_{k=1}^{\infty}\left|R_k\right|\]
    where the infimum is taken over all countable coverings $\left\{R_k\right\}_{k=1}^{\infty}$ by closed rectangles where 
    $E \subset \bigcup\limits_{k=1}^{\infty}R_k$.
\end{define}

\begin{fact}
    We try to list some trival facts here.
    \begin{enumerate}
        \item Let $Q$ denote a closed cube, then we have $m^*(Q) = \left\lvert Q\right\rvert $
        \item If $Q$ is an open cube, the result $m^*(Q) = \left\lvert Q\right\rvert $ still holds.
        \item The exterior measure of a rectangle $R$ equals to its volume.
        \item The exterior measure of $\mathbb{R}^n$ is infinite.
        \item Let $\mathcal{C} $ denote the Cantor Set, then $m^*(\mathcal{C})=0$
    \end{enumerate}
\end{fact}

Before giving the property of exterior measure, we should point out a remark that could be generated from the facts above
immediately: 
For every $\epsilon>0$,there exists a covering $E \subset \bigcup\limits_{k=1}^{\infty}Q_k$ with
\[\sum\limits_{k=1}^{\infty}m^*(Q_k) \leq m^*(E)+\epsilon\]

\begin{prop}[Monotonicity]
    If $E_1 \subset E_2$, then \[m^*(E_1) \leq M^*(E_2)\]
\end{prop}

\begin{prop}[Countable Sub-additivity]
    If $E \subset \bigcup\limits_{k=1}^{\infty}E_k$, then \[m^*(E) \leq \sum\limits_{k=1}^{\infty}m^*(E_k)\]
\end{prop}

\begin{prop}
    \label{sec exterior measure:open set}
    If $E \subset \mathbb{R}^n$, \[m^*(E) = \inf m^*(\mathcal{O} )\], where $\mathcal{O} $ is taken over all open sets
    that contains $E$.
\end{prop}

\begin{prop}
    If $E=E_1\bigcup E_2$, and $d(E_1,E_2) > 0$, then \[m^*(E) = m^*(E_1)+m^*(E_2)\]
\end{prop}

\begin{prop}
    If $E$ is a countable union of almost disjoint cubes $E = \bigcup\limits_{k=1}^{\infty}E_k$, then
    \[m^*(E)=\sum\limits_{k=1}^{\infty}m^*(E_k)\]
\end{prop}

\section{Lebesgue Measure}

Before we formally introduce the notion of measure, we need to have an essential recall on the measure we are looking for:
\begin{enumerate}
    \item The measure $m$ should be a non-negative function defined on the family of subsets $E$ of $\mathbb{R}^n$ that we allow to be extended-value
    \item $m(E)=b-a$ if $E$ is the interval $\left[a,b\right] $ with $a \leq b$
    \item $m(E) = \sum\limits_{n=1}^{\infty}m(E_n)$ whenever $E = \bigcup\limits_{n=1}^{\infty}m(E_n)$ and $\left\{E_n\right\}_{n=1}^{\infty}$ are disjoint. (Namely, $m$ satisfies countable additivity)
    \item Let $E+h$ denote $\left\{x+h:\, x \in E\right\}$, then $m(E+h)=m(E)$ for every $h \in \mathbb{R}^n$
\end{enumerate}

According to the facts above, we can see that the exterior~measure has sactisfied the previous two properties and sub-additivity.
We'll claim that in a certain family of subsets of $\mathbb{R}^n$, the exterior~measure can obtain the property of countable
additivity. Such measure will be illustrated below:

\begin{define}[Lebesgue Measure]
    A subset $E$ of $\mathbb{R}^n$ is \textbf{Lebesgue~measurable}, or simply \textbf{measurable}, if for any $\epsilon>0$,
    there exists an open set $\mathcal{O} $ with $E \subset \mathcal{O} $ and 
    \[m^*(\mathcal{O} - E) < \epsilon\]
    If $E$ is measurable, we define its \textbf{Lebesgue~measure} by \[m(E)=m^*(E)\]
\end{define}
Clearly, the Lebesgue~measure inherited all the properties from the exterior measure. To discover the nature of measurable,
we could compare the definition of measurable with Property \ref{sec exterior measure:open set}

\begin{prop}
    Every open set in $\mathbb{R}^n$ are measurable.
\end{prop}
\begin{prop}
    If $m^*(E)=0$, then $E$ is measurable. In particular, if $F$ is a subset of a set of exterior measure 0, then $F$ is measurable.
\end{prop}
\begin{prop}
    A countable union of measurable sets is measurable.
\end{prop}
\begin{lema}
    If $F$ is closed and $K$ is compact, and these sets are disjoint, then $d(K,F)>0$
\end{lema}
\noindent What if switch the condition to ``two disjoint closed sets"?
\begin{prop}
    Closed sets are measurable.
\end{prop}
\begin{prop}
    The complement of a measurable set is measurable.
\end{prop}
In conclusion, we found many familiar sets in the family of measurable sets, including open sets, closed sets and compact sets,
which are easy to manipulate. More specifically, we can conclude that the family of measurable sets is a $\sigma-$algerbra proven
by Property 8 and Property 10.

\subsection*{The properties of Lebesgue~measure}

Apart from the properties inherited from exterior measure, the notion of measurable provides us more ``good'' properties
for many opreations such as limit opreation, additivity etc. 

\begin{thm}
    If $E_1,E_2,\ldots$ are disjoint measurable sets, and $E = \bigcup\limits_{n=1}^{\infty}E_n$, then
    \[m(E)=\sum\limits_{n=1}^{\infty}m(E_n)\]
\end{thm}

\begin{define}[the limit of sets]
    If $E_1,E_2,\ldots$ is a countable collection of subsets of $\mathbb{R}^n$ that increases to $E$ in the sense that
    $E_k \subset E_{k+1}$ for all $k \in \mathbb{N}^*$ and $E = \bigcup\limits_{k=1}^\infty E_k$, then we write 
    $E_k \nearrow E$ or $E_k \uparrow E$ or \[\lim \limits_{k\rightarrow \infty}E_k = E\]
    Similarly, if $E_1,E_2,\ldots$ decreases to $E$ in the senese that $E_{k+1} \subset E_k$ for all $k \in \mathbb{N}^*$
    and $E = \bigcap\limits_{k=1}^{\infty}E_k$, then we write 
    $E_k \searrow E$ or $E_k \downarrow E$ or \[\lim \limits_{k\rightarrow \infty}E_k = E\]
\end{define}

\begin{define}[The upper limit and lower limit of sets]
    Let $E_1, E_2,\ldots$ be a countable collection of subsets of $\mathbb{R}^n$. Then we denote the \textbf{upper~limit} of the
    collection as \[\varlimsup \limits_{k \rightarrow \infty} E_k := \bigcap\limits_{k=1}^\infty\bigcup\limits_{n=k}^\infty E_k \]
    define the \textbf{lower~limit} as
    \[\varliminf \limits_{k \rightarrow \infty} E_k := \bigcup\limits_{k=1}^\infty\bigcap\limits_{n=k}^\infty E_k \]
\end{define}

\begin{cor}[The continuity of Lebesgue~measure]
    Suppose $E_1,E_2,\ldots$ is a countable collection of measurable sets in $\mathbb{R}^n$,
    \begin{enumerate}
        \item If $E_k \uparrow E$, then $m(E)=\lim\limits_{k \rightarrow \infty} m(E_k)$
        \item If $E_k \downarrow E$ and $m(E_1)<\infty$, then $m(E) = \lim\limits_{k \rightarrow \infty} m(E_k)$
    \end{enumerate}
\end{cor}

To provide a rather important geometric and analytic insight into the nature of measurable sets, we try to list the
equivalent definitions of measurable sets below.
\begin{thm}
    Suppose $E$ is a measurable subset of $\mathbb{R}^n$, then for every $\epsilon>0$,
    \begin{enumerate}
        \item There exists an open set $\mathcal{O}$ with $E \subset \mathcal{O}$, and $m^*(\mathcal{O} - E) < \epsilon$
        \item There exists a closed set $F$ with $F \subset E$, and $m^*(E-F)<\epsilon$
        \item If $m(E)$ is finite, there exists a compact set $K$ with $K \subset E$ and $m^*(E-K) < \epsilon$
        \item If $m(E)$ is finite, there exists a finite union $F=\bigcup\limits_{j=1}^N Q_j$ of closed cubes such that \[m^*(E\triangle F)<\epsilon\]
    \end{enumerate}
\end{thm}
\begin{thm}[\textbf{Caratheodory's~Criterion}]
    Suppose $E$ is a subset of $\mathbb{R}^n$, if for every $A\subset \mathbb{R}^n$, the inequation
    \[m^*(A) \geq m^*(A\cap E)+m^*(A\cap E^c)\]
    holds, then we could confirm that $E$ is a measurable set.
\end{thm}

\begin{thm}[Invariance properties]
    Suppose $E$ is a subset of $\mathbb{R}^n $ and $h,\delta \in \mathbb{R}$. Let $E+h$ denote $\left\{x+h:\, x\in E\right\}$, and
    $\delta E$ denote $\left\{\delta x:\, x\in E\right\} $, then
    \begin{enumerate}
        \item \textbf{Translation~invariance} If $E$ is measurable, for any real number $h$, $E+h$ is measurable and $m(E) = m(E+h)$
        \item \textbf{Reflection~invariance} If $E$ is measurable, $-E$ is measurable and $m(-E) = m(E)$
        \item \textbf{Dialation~invariance} If $E$ is measurable, $\delta E$ is measurable and $m(\delta E) = \left\lvert\delta \right\rvert^nm(E)$
    \end{enumerate}
\end{thm}

\subsection*{Borel~sets and non-measurable sets}

We have illustrated that the core of measure theory is to approximate most of subsets of $\mathbb{R}^n$ with simple sets which
can be manipulated easily. In fact, the process of approximating is mainly about combining the simple sets together with basic
operations for sets. Hence we want to figure out the structure of the collection of sets that is closed under all basic opreations
for sets. At the same time, we know that all open sets can be uniquely written as a countable union of closed rectangles, which
implies that open set is also a kind of simple sets.    

\begin{define}[$\sigma$-algerbra]
    Assume $\mathscr{A}$ is a collection of subsets of $X$, if:
    \begin{enumerate}
        \item $\varnothing \in \mathscr{A}$
        \item for every $A \in \mathscr{A}$, $A^c \in \mathscr{A}$
        \item if $A_1,A_2,\ldots$ is a countable list of sets in $\mathscr{A}$, $\bigcup\limits_{k=1}^\infty A_k \in \mathscr{A}$
    \end{enumerate}
    then we define $\mathscr{A}$ as a \textbf{$\sigma$-algerbra}

    Suppose there is a collection of sets $F$. If a $\sigma$-algerbra with $F \subset \mathscr{A}$ is the ``smallest'' $\sigma$-algerbra
    which contains every set in $F$, such $\sigma$-algerbra is denoted by $\sigma(F)$ and is called \textbf{the $\sigma$-algerbra generated by $F$} 
\end{define}

\begin{define}[Borel~set]
    Let $\mathcal{O} $ denote the collection of all open sets in $\mathbb{R}^n $, then the \textbf{Borel~set} is defined by
    $\mathscr{B}(\mathbb{R}^n) = \sigma(\mathcal{O})$ 
\end{define}

Although Borel~sets has many good properties---It is a collection of set totally generated by simple sets, the Borel set
is a subset of the collection of Lebesgue measurable sets, say, there exists a Lebesgue measurable set that is not contained
in the Borel set. From the point of view of the Borel sets, the Lebesgue sets arise as the completion of the $\sigma$-algebra
of Borel sets, that is, by adjoining all subsets of Borel sets of measure zero.

To state the view above, we try to list two trival kind of sets in Borel set.The first one is the countable intersections of
open sets, denoted by $G_{\delta}$. The second one is the complement of the first one, which can be seen as the countable union
of closed sets, denoted by $F_{\sigma}$. Then we have the corollary below.

\begin{cor}
    A subset $E$ of $\mathbb{R}^n $ is measurable if and only if:
    \begin{enumerate}
        \item $E$ differs from a $G_{\delta}$ by a set of measure zero.
        \item $E$ differs from an $F_{\sigma}$ by a set of measure zero.
    \end{enumerate}  
\end{cor}

Then, we try to construct a non-measurable set. This example will show the reason of why we can not set up a measure theory
for all sets in $\mathscr{P}(\mathbb{R}^n)$.

Such example lays on \textbf{axiom of choice}:
\begin{fact}
    We define a binary ralation $x\sim y:x-y$ is rational. Obviously, we can find that such binary relation is an equivalence
    relation. Therefore, we have equivalence class in section $[0,1]$: $\left\{\bar{x}\right\} $ for all $x$ in $[0,1]$. Such
    equivalence classes will be either disjoint or coincide, and we have $[0,1]=\cup_{x \in [0,1]}\bar{x}$. Now we
    choose one $x_\alpha$ from each $\bar{x}$, and let $\mathscr{N}$ denote the set $\left\{x_\alpha\right\}$, then we will see
    the fact---The set $\mathscr{N}$ is not measurable.
\end{fact}

At the end, we will take a brief look at one simple corollary of \textbf{Fatou Lemma}(Lemma \ref{int: Fatou})
\begin{lema}[Borel-Cantelli]
    Suppose $\left\{E_k\right\}_{k=1}^\infty$ is a countable family of measurable subsets of $\mathbb{R}^n$ with 
    \[\sum_{k=1}^\infty m(E_k) < \infty\]
    Then we have $m(\varlimsup_{k\rightarrow\infty}E_k) = 0$
\end{lema}

\section{measurable~functions}

We begin by considering only real~valued dunction $f$ of $\mathbb{R}^n$, which we allow to take on infinite numbers $+\infty$ and 
$-\infty$. So we have \[-\infty \leq f(x) \leq +\infty\]And we shall say that $f$ is \textbf{finite-valued} if $-\infty \leq f(x) \leq \infty$
for all $x$. Let $\overline{\mathbb{R}}$ denote the extended real numbers.

\begin{define}[measurable function]
    A funtion $f$ defined on a subset $E$ of $\mathbb{R}^n$ is \textbf{measurable} if for every real number $a$, the set
    \[\left\{f < a\right\} =f^{-1}([-\infty,a)):= \left\{x \in E:\, f(x)<a\right\} \]
    is measurable.
\end{define}

First, it is easy to note that there are many equivalent definitions of measurable functions.
\begin{prop}
    The finite-valued function $f$ is measurable if and only if $f^{-1}(\mathcal{O})$ is measurable for every open set $\mathcal{O} \subset \mathbb{R}$,
    and if and only if $f^{-1}(F)$ is measurable for every closed set $F \subset \mathbb{R}$.
    If we make the additional hypothesis that both $f^{-1}(-\infty)$ and $f^{-1}(\infty)$ are measurable, the property above can be
    applied to extended-valued functions.
\end{prop}
Note that we can prove that after the operation of complements, countable union and countable intersections, the equivalence
relation between new test sets and original test sets in definition still holds. Therefore, we have a developed property.
\begin{prop}
    The extended-valued function $f$ is measurable if and only if $f^{-1}(B)$ is measurable for every $B \in \mathscr{B}(\overline{\mathbb{R}})$
\end{prop}
\begin{prop}
    If $f$ is continuous on $\mathbb{R}^n$, then $f$ is measurable. If $f$ is measurable and finite-valued, and $\Phi$ is continuous,
    then $\Phi \circ f$ is measurable. 
\end{prop}
\begin{prop}
    Suppose $\left\{f_n\right\}_{n=1}^\infty $ is a sequence of measurable fuctions, then 
    \[\sup f_n,\quad \inf f_n,\quad \varlimsup\limits_{n \rightarrow \infty} f_n,\quad \varliminf\limits_{n \rightarrow \infty} f_n\]
    are measurable.(These opreations are pointwise.)
\end{prop}
\begin{prop}
    If $\left\{f_n\right\}_{n=1}^\infty $ is a collection of measurable functions, and the limit of the collection converges pointwisely
    , and\[\lim\limits_{n \rightarrow \infty} f_n = f\]
    then $f$ is measurable.
\end{prop}
\begin{prop}
    \label{prop:add-measurable}
    If $f$ and $g$ are measurable, then
    \begin{enumerate}
        \item for every $k \in \mathbb{N}_+$, $f^k$ is measurable.
        \item $f+g$ and $fg$ are measurable if both $f$ and $g$ are finite.
    \end{enumerate}
\end{prop}
Since the proof of the second point of property is by $\bigcup\limits_{r \in \mathbb{Q}}\left\{f < a\right\}\cap\left\{g < a - r\right\}$
and $fg = \frac{1}{4}[(f+g)^2 - (f-g)^2]$, we can somewhat loose its condition to part of extended-valued function. Because what we
don't want is the existance of $\infty - \infty$ 

\begin{define}[almost everywhere]
    Generally speaking, a statement or a property is said to hold \textbf{almost~everywhere} if it is true except on a set of measure
    zero. 
\end{define}
Take ``Equal almost everywhere'' as an example. Suppose $f$ and $g$ are two functions defined on a set $E$, we shall say that $f$ and
$g$ are equal almost everywhere, write
\[f(x) = g(x) \quad \text{a.e},\, x\in E\]
if the set $\left\{x\in E:\, f(x)\neq g(x) \right\} $ has the measure of zero.

With such definition, we can relax the properties above to conditions holding almost everywhere. Namely, we have some corollaries
below.
\begin{cor}
    We assume the $f$ and $g$ below have the same definition field, then
    \begin{enumerate}
        \item Suppose $f$ is a measurable function, and $f=g\quad \text{a.e.}$ Then $g$ is measurable.
        \item Assume $\{f_n\}_{n=1}^\infty$ is a collection of measurable functions, and \[\lim\limits_{n\rightarrow\infty}f_n = f\quad \text{a.e.}\]. Then $f$ is measurable.
        \item Suppose $f$ and $g$ are finite-valued almost everywhere, then the property \ref{prop:add-measurable} still holds.
    \end{enumerate}
\end{cor} 

\subsection*{Approximation of measurable functions}

\begin{define}[Characteristic~function]
    The \textbf{Characteristic~function} of a set $E$ is defined by
    \[\chi_E(x) = \begin{cases}
        1 & \text{if } x \in E,\\
        0 & \text{if } x \notin E.
    \end{cases}\]
    It can also be denoted by $\mathbbm{1}_E$
\end{define}

\begin{define}
    A \textbf{simple~function} is given as a finite sum
    \begin{equation*}
        f := \sum\limits_{n = 1}^N a_n\chi_{E_n}
    \end{equation*}
    where each $E_k$ is a measurable set, and $a_k$ are constants.
    Especially, when each $E_k$ is a rectangle, we define such finite sum as \textbf{step~function}.
\end{define}

Actually, the step functions are widely used in Riemann integrals ,where partitions are mainly consists of sections. However,
to find building blocks for Lebesgue integrals, we must replace step functions by simple functions. Then we will explain why we could
take simple functions as the building blocks of Lebesgue integral.

\begin{thm}
    Suppose $f$ is a non-negative measurable function on $\mathbb{R}^n$. Then there exists an increasing sequence of non-negative
    simple functions $\{\varphi_k\}_{k=1}^\infty$ that converges pointwise to $f$.
\end{thm}

Considering that we can divide any functions into two non-negative functions by $f = f_+ - f_-$, with $f_+$ denoting $\max\{f(x), 0\}$
and $f_-$ denoting $\max\{-f(x), 0\}$ pointwise. Then a new theorem comes:

\begin{thm}
    Suppose $f$ is a measurable function on $\mathbb{R}^n$. Then there exists a sequence of simple functions $\{\varphi_k\}_{k=1}^\infty$
    that satifies \[\left\lvert \varphi_k\right\rvert \leq \left\lvert  \varphi_{k+1}\right\rvert \quad \text{and} \quad \lim\limits_{k \rightarrow \infty}
    \varphi_k = f \text{ for all }x  \]
\end{thm}

\begin{thm}
    Suppose $f$ is measurable on $\mathbb{R}^n$.Then there exists a sequence of step functions $\{\phi_k\}_{k=1}^\infty$
    that converges pointwise to f(x) for almost every $x$.
\end{thm}

\subsection*{Littlewood's~three~principles}

\begin{fact}[Littlewood's~three~principles]
    The relation between new concepts of Lebesgue measure and old concepts could be described below:
    \begin{enumerate}
        \item Every set is nearly a finite union of intervals.
        \item Every function is nearly continuous.
        \item Every convergent sequence is nearly uniformly convergent.
    \end{enumerate}
\end{fact}

\begin{thm}[Egorov]
    Suppose $\{f_k\}_{k=1}^\infty$ is a sequence measurable functions defined on a measurable set $E$ with $m(E) < \infty$, and
    assume $f_k \rightarrow f \, \text{a.e.}$ on set $E$. Given $\epsilon > 0$, we can find a closed set $A_\epsilon \subset E$
    such that $m(E-A_\epsilon) < \epsilon$ and $f_k \rightarrow f$ uniformly on $A_\epsilon$.
\end{thm}

\begin{thm}[Lusin]
    Suppose $f$ is a finite-valued measurable function defined on a set $E$ with $E$ of finite measure. Then for every $\epsilon > 0$,
    there exists a closed set $F_\epsilon$, with \[F_\epsilon \subset E, \quad \text{and} \quad m(E-F_\epsilon) \leq \epsilon\]
    and such that $f|_{F_\epsilon}$ is continuous. 
\end{thm}

\section{The Brunn-Minkowski inequality}

\begin{define}[convex set]
    A \textbf{convex~set} $A$ is defined by the property that whenever $x$ and $y$ are in set $A$ then the line segment joining
    them, namely $\left\{tx+(1-t)y:\,0<t<1\right\}$, also belongs to set $A$.
\end{define} 

Since addition and multiplication by scalars are basic features of vector spaces, Here we come to the study of the sum of two
measurable sets $A$ and $B$, defined as
\[A + B := \left\{x+y:\, x\in A, y \in B\right\} \]

To give a general estimate for the measure of $A+B$  in terms of the measure of $A$ and $B$, we want an inequation in such form:
\[ m(A+B)^\alpha \geq c_\alpha(m(A)^\alpha + m(B)^\alpha)\]

\begin{thm}
    Suppose set $A$ and $B$ on $\mathbb{R}^n$ are measurable and their sum $A+B$ is also meaurable, then we have the inequality:
    \[m(A+B)^{1/n} \geq m(A)^{1/n} + m(B)^{1/n}\]
\end{thm}
Meanwhile, we have such facts:
\begin{fact}
    While we may assume that $A$ and $B$ are measurable, it does not necessarily follow that then $A + B$ is measurable.
    However, we can see that if $A$ and $B$ are close sets, then $A+B$ is a close set. 
\end{fact}

\chapter{Integration Theory}

\section{Basic properties and converge theorems}

To make the definition natural, we try to build the integration by a step-by-step fashion. We proceed in four stages, by
progressively integrating:
\begin{enumerate}
    \item Simple functions
    \item Bounded functions supported on a set of finite measure
    \item Non-negative functions
    \item Integrable functions
\end{enumerate}

\subsection{Step one: Simple~functions}

It could be obvious that a simple function can be written in a multitude way of linear combinations, which can probably result in some
unexpected circumstances when establishing the Integration~Theory. Therefore, we try to standardize the form of simple functions.

\begin{define}[The canonical form of simple functions]
    Suppose $\varphi$ is a simple function with
    \[\varphi = \sum\limits_{n=1}^N a_n\chi_{E_n}\]
    where $a_n$ are real numbers and $E_n$ are measurable sets.
    $\varphi$ is in its \textbf{canonical~form} when the numbers $a_k$ are distinct and non-zero, and the sets $E_k$ are disjoint.
\end{define}

\begin{define}[Lebesgue~integral for simple functions]
    If $\varphi$ is a simple function with canonical form $\varphi = \sum_{n=1}^N a_n\chi_{E_n}$, then we define the \textbf{Lebesgue~integral}
    of $\varphi$ as 
    \[\int_{\mathbb{R}^n} \varphi(x)\,dx = \sum_{n=1}^N a_nm(E_n)\]
    And if $E$ is a measurable subset of $\mathbb{R}^n$ with finite measure, then we define
    \[\int_{E} \varphi(x)\,dx = \int_{\mathbb{R}^n} \varphi(x)\chi_{E_n}(x)\,dx\]
    To emphasize the choice of measure, the integral can be also written as
    \[\int_{\mathbb{R}^n} \varphi\,dm \quad \text{or} \quad \int_{\mathbb{R}^n} \varphi(x)\,m(dx)\]
\end{define}

\begin{prop}
    \label{int: simple prop}
    The integral of simple functions defined above satisfies the following properties:
    \begin{enumerate}
        \item Linearity. If $\varphi$ and $\psi$ are simple, and $a,b \in \mathbb{R}^n$ ,then \[\int (a\varphi + b\psi) = a\int\varphi + b\int\psi\]
        \item Additivity. If $E$ and $F$ are disjoint subsets of $\mathbb{R}^n$ with finite measure, then\[\int_{E\cup F}\varphi = \int_E\varphi+\int_F\varphi\]
        \item Monotonicity. If simple functions $\varphi$ and $\psi$ satisfies $\varphi \leq \psi$, then \[\int\varphi \leq \int\psi\]
        \item Triangle inequality. If $\varphi$ is a simple function, then \[\left\lvert \int\varphi\right\rvert \leq \int\left\lvert \varphi\right\rvert\]
        \item Independence of representation. If $\varphi = \sum_{n=1}^N a_n\chi_{E_n}$ is any representation of $\varphi$, then \[\int\varphi = \sum_{n=1}^N a_nm(E_n)\] 
    \end{enumerate}
\end{prop}

\begin{fact}
    Suppose $f$ and $g$ are simple functions with $f=g\,\text{a.e.}$, then $\int f=\int g$
\end{fact}

\subsection{Step two: Bounded functions supported on a set of finite measure}

\begin{define}[support]
    The \textbf{support} of a measurable function f is defined to be the set of all points where f does not vanish:
    \[supp(f):=\left\{x: f(x) \neq 0\right\} \]
    We shall say that $f$ is \textbf{supported} on a set $E$, if $f(x) = 0$ whenever $x\notin E$.
\end{define}

\begin{lema}
    \label{int: bounded conv}
    Let $f$ be a bounded function supported on a set $E$ of finite measure. If $\left\{\varphi_k\right\}_{k=1}^\infty$ is any
    sequence of simple functions bounded by $M$, supported on $E$, and with $\varphi_k(x) \rightarrow f(x) \text{ a.e. }$, then:
    \begin{enumerate}
        \item The limit $\lim\limits_{n\rightarrow\infty}\int\varphi_n$ exists.
        \item If $f=0 \text{ a.e. }$, then the limit $\lim\limits_{n\rightarrow\infty}\int\varphi_n$ equals zero.
    \end{enumerate}
\end{lema}

\noindent Using Lemma \ref{int: bounded conv} we can now give a specific definition to the bounded functions that are supported
on sets of finite measure:
\begin{define}
    Suppose $f$ is a bounded function supported on sets of finite measure. Then we define its \textbf{Lebesgue~measure} by:
    \[\int f(x)\, dx := \lim_{n\rightarrow\infty}\int\varphi_n\, dx\]
    where $\left\{\varphi_n\right\}_{n=1}^\infty$ is a sequence satisfying: $\left\lvert \varphi_n\right\rvert \leq M$,
    each $\varphi_n$ is supported on the support of $f$, and $\varphi_n \rightarrow f \text{ for a.e. } x$
\end{define}

It can be easy to see that such definition inherits all the properties from Property \ref{int: simple prop}, except for Independence
of representation. Its Independence of representation is about the integration is independent from the function sequence.

\begin{thm}[Bounded convergence theorem]
    Suppose $\left\{f_n\right\}_{n=1}^\infty$ is a sequence of measurable functions that are all bounded by $M$, are supported on
    a set $E$ of finite measure, and $f_n(x) \rightarrow f(x)\text{ a.e. }$. Then $f$ is measurable, bounded and supported on set
    $E$ for $\text{a.e. }x$, and \[\int\left\lvert f_n - f\right\rvert \rightarrow 0 \quad \text{as }n \rightarrow \infty\]
\end{thm}

\begin{thm}
    Suppose $f$ is Riemann~integrable on the closed interval $[a,b]$, then $f$ is measurable, and
    \[\int_{[a,b]}^\mathcal{R}f(x)\,dx = \int_{[a,b]}^\mathcal{L}f\, dm\]
\end{thm}

\subsection*{Stage three: Non-negative functions}

\begin{define}[Lebesgue~integral]
    The \textbf{Lebesgue~integral} of a non-negative measurable function $f$ is defined by
    \[\int f \,dm= \sup\left\{\int g\,dm:\, 0\leq g \leq f\right\} \]
    where $g$ is bounded and supported on a set of finite measure. When $\int f\,dm < \infty$, we say that $f$ is \textbf{Lebesgue~integrable}.
\end{define}
Actually, if we transfer the constrain of definition above to ``where $g$ is simple'', it is also an equivalent definition.

\begin{prop}
    The integral of non-negative measurable functions enjoys the following properties:
    \begin{enumerate}
        \item properties inherited from Property \ref{int: simple prop}
        \item If $g$ is integrable, and $0\leq f\leq g$, then $f$ is integrable.
        \item If $f$ is integrable, then $f(x) < \infty\text{ a.e. }x$
        \item If $\int f = 0$, then $f(x) = 0\text{ a.e. }x$
    \end{enumerate}
\end{prop}

\begin{lema}[Fatou]
    \label{int: Fatou}
    Suppose $\left\{f_n\right\}_{n=1}^\infty$ is a sequence of non-negative measurable functions, then
    \[\int \varliminf_{n \rightarrow \infty} f_n \leq \varliminf_{n \rightarrow \infty} \int f_n\]
\end{lema}
\begin{cor}[Fatou]
    Suppose $\left\{E_n\right\}_{n=1}^\infty$ is a sequence of measurable sets, then
    \[m\left(\varliminf_{n \rightarrow \infty} E_n \right) \leq \varliminf_{n \rightarrow \infty} m(E_n)\]
\end{cor}

\begin{thm}[Monotone convergence theorem]
    Suppose $\left\{f_n\right\} $ is a sequence of non-negative measurable functions, and $f_n\uparrow f$ for a.e. $x$. Then,
    \[\lim_{n\rightarrow \infty}\int f_n\,dm = \int f\,dm\]
\end{thm}
\begin{cor}
    Consider a series $\{a_k\}$, where $a_k(x) \geq 0$ for every $k \geq 1$, then
    \[\int\sum_{n=1}^\infty a_k\, dm = \sum_{n=1}^\infty\int a_k\, dm\]
\end{cor}

\subsection{Stage four: general case}

\begin{define}[Lebesgue~integral]
    Suppose $f$ is a measurable function. Then we define the \textbf{Lebesgue~integral} of $f$ by
    \[\int f = \int f_+ - \int f_-\]
    and we say that $f$ is \textbf{Lebesgue~integrable} whenever both $f_+$ and $f_-$ are integrable.
\end{define}

\begin{thm}
    Suppose $f$ is integrable on $\mathbb{R}^n$. Then for every $\epsilon > 0$:
    \begin{itemize}
        \item There exists a set of finite measure $B$ such that \[\int_{B^c} \left\lvert f\right\rvert \, dm < \epsilon\]
        \item There is a $\delta > 0$ such that \[\int_E \left\lvert f\right\rvert\,dm < \epsilon\quad\text{whenever }m(E) < \delta \]
    \end{itemize}
\end{thm}

\begin{thm}[Dominated convergence theorem]
    Suppose $\left\{f_n\right\}_{n=1}^\infty$ is a sequence of measurable functions such that $f_n(x)\rightarrow f(x)\text{ a.e. }x$
    as $n$ tends to infinity. If $\left\lvert f_n\right\rvert \leq g $ and $g$ is integrable, then
    \[\lim_{n\rightarrow\infty}\int f_n = \int f\]
\end{thm}

\end{document}